<!doctype html><html>
    
<head><title>clockwizz</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="icon" type="image/x-icon" href="favicon.ico">
<link id="luckiestFont" href="https://fonts.googleapis.com/css?family=Luckiest+Guy" rel="stylesheet">
<link id="demoStyles" rel="stylesheet" type="text/css" href="demoStyles.css">
<script src="clockwizz.js"></script>
</head>

<body>
<div id="holder">
    
    <div id="sceneDiv" class="clockwizz" data-wizz>
        <div id="heartDiv">
            <svg id="heartSVG" transform="scale(0)" style="right:50px;bottom:20px;border:0px solid #fff;" height="200px" width="200px" xmlns="http://www.w3.org/2000/svg">
                <path class="Xpath" fill="#a20" stroke="rgba(50, 10, 0, 0.95)" stroke-width="10" style="transform-origin:50% 50%" transform="rotate(-35 0 0) translate(30 5)" d="
M 0 150
A 500 500 0 0 0 0 50
A 30 30 0 0 1 100 50
A 30 30 0 0 1 100 150
A 500 500 0 0 0 0 150
Z
                "/>
            </svg>
        </div>

        <img id="hackbox" src="hackBox0.svg">
        
        <div id="shadow"></div>
        
        <div id="queviva" class="qr"><i>~queviva</i></div>
    </div>
    
    <div intro class="qr">
        <center style="font-size:0.8em;">
        make a circular motion, while touching or pressing,
        on the image above
        </center>
        <br>
    
        <b>clockwizz</b> adds a
        <i>clockwise motion event</i>
        to any of the specified elements in a page;
        listen for, and handle them, in the same way
        you would any event.
        
        <br><br>
        
        include the script, along with any optional
        parameters in a data-param;
        the following example lists all default values
    </div>

    <div prescript class="qr">
        <pre>
            
&lt;script src="clockwizz.js"
 data-wizz='{
    "selector"       : "wizz"
    "preventDefault" :  true
 }'
&gt;&lt;/script&gt;


&lt;div id="sampleDiv" data-wizz&gt;
    clockwise motions on this div
    will generate events
&lt;/div&gt;


&lt;script&gt;

    document.getElementById('sampleDiv')
    .addEventListener(
        'clock-wizz',
        e => {
            // handle clockwise motion using
            //
            // e.detail.dir
            // for the direction of the turn
            //
            // e.detail.mag
            // for the magnitude of the turn
            //
            // e.detail.ref
            // for reference to the event
        }
    );
        
&lt;/script&gt;

        </pre>
    </div>
    
    <div direzione class="qr">
        <i>e.detail.dir</i> has three possible values:
        <ul style="font-family:cousine;">
            <li>&nbsp;1 ::: clockwise</li>
            <li>&nbsp;0 ::: no turn</li>
            <li>-1 ::: counter-clockwise</li>
        </ul>
        
    </div>
    
    <div mag class="qr">
        <i>e.detail.mag</i> is a pixel value of the
        magnitude of the turning - the larger the circles
        being swept out, the larger the integer's value
    </div>
    
    <div reffer class="qr">
        <i>e.detail.ref</i> is a reference to the event
        that generated the clockwise motion -
        that is, if a mouse event, or a touch event,
        or a pointer event, generated the clockwise event,
        <i>e.detail.ref</i> is a reference to that event
        <br><br>
        for instance,
        in the case where <i>preventDefault</i> is false,
        the clockwizz handler might want to
        stop propagation or other such things; that
        would be done with:
        <i>e.detail.ref.stopPropagation()</i>
        <br><br>
        or, if you wanted to know the x-coordinate
        location of the mouse when the clockwizz event was
        generated, you can get that from:
        <i>e.detail.ref.clientX</i>
    </div>
            
    <div samp0 class="qr">
    <div id="samp0" class="qr" data-wizz style="
        margin:20px 0px;border-radius:0px 10px;text-align:center;
        
    ">
    
        clockwise motions in this div will
        change the background color
        <br><br>
        <a href="demo.html">see this page
        and its source for another example</a>
        
        <script>
          const samp0 = document.getElementById('samp0');
          samp0.hue = 12;
          samp0.style.backgroundColor = 'hsla('+ samp0.hue +',100%,33%,1.0)';
          samp0.addEventListener('clock-wizz', e => {
            samp0.hue = samp0.hue + (3 * e.detail.dir);
            samp0.style.backgroundColor =
            'hsla('+ samp0.hue +',100%,33%,1.0)';
          });
        </script>
    </div>
    </div>
    
    <div defaults class="qr">
        the following options can be set in the
        data-param
        
        <ul>
            <li><b>selector : wizz</b> - this is the term
            that gets added to the element's tag as a
            data-param to indicate that it should generate
            clockwise motion events; by default, that
            might look like this
            <i>&lt;div data-wizz&gt;</i>; this is also
            appended to the event name,
            <i>clock-[selector]</i> will alway be the
            event to listen for
            </li>
            <br>
            
            <li><b>preventDefault : true </b> - by default,
            <i>stopPropagation()</i> and <i>preventDefault()</i>
            are called on whatever event generated the
            clockwise motion - change this boolean value to
            <i>false</i> if you want default behaviors to occur
            </li>
        </ul>
        
    </div>

    <div simple class="qr">
        
        <p>
        if you are happy with the defaults, you can simply
        include the <i>clockwizz</i> script, label any
        elements with <i>data-wizz</i> parameters, and
        write handlers for the <i>clockwizz</i> event
        </p>
        
        <pre>
            
&lt;script src="clockwizz.js"&gt;&lt;/script&gt;

&lt;div data-wizz&gt;
...
&lt;/div&gt;
        </pre>
            
    </div>
    
    <hr>
    <div id="sig" class="qr" data-wizz
     style="
        height: 200px;
     "
    >
        
        <div id="sigRot" style="
            position: relative;
            float: right;
            width:100px;
            height: 8px;
            --rot: 0deg;
            transform: rotate(var(--rot));
            font-family: Luckiest Guy;
        "><i>~queviva</i></div>
        
        <script>
            let rotation = 0;
            
            const rot = document.getElementById('sigRot');
            document.getElementById('sig')
            .addEventListener('clock-wizz',
            (e, val=e.detail) => {
                rot.style.setProperty(
                    '--rot',
                    (rotation -= val.dir * .2* val.mag)
                    + 'deg'
                );
                //val.ref.stopPropagation();
                //val.ref.preventDefault();
            },{passive:false});
        </script>
    </div>

</div>
</body>

<script id="demoScript">

window.addEventListener('load', e => {
    
    const
    HB = document.getElementById('hackbox'),
    hold = document.getElementById('sceneDiv'),
    hrt = document.getElementById('heartSVG'),
    shad = document.getElementById('shadow');
    
    let
    HBcs = window.getComputedStyle(HB),
    HBw = parseInt(HBcs.width, 10),
    holdWidth = parseInt(
        window.getComputedStyle(hold).width, 10
    ),
    WW = holdWidth + HBw,
    left = HBw + parseInt(HBcs.left, 10),
    pulse = 1,
    xL = WW - 120, yL = -100,
    xB = left, yB = 200,
    xS = 0, yS = 280;
        
    const woggle = e => {
        
        left = (((left+((e.detail.mag/5)*e.detail.dir*2))%WW)+WW)%WW;
        HB.style.left = -HBw + left +'px';
        xB = -HBw + left + 60;
        hrt.setAttributeNS(null,'transform', 'scale('+
            (0.0 + (3 * ((Math.abs(((left * pulse) % WW) - (WW/2)))/WW)))
        +')');
        
        // calculate the shadow x position
        let theta1 = -Math.atan2(
            yB - yL,
            xB - xL
        );
        let mag1 = 80 / Math.sin(theta1);
        xS = mag1 * Math.cos(theta1);
        shad.style.left = xB - xS + 'px';
        
        // calculate the shadow width
        let theta2 = -Math.atan2(
            yB - yL,
            (xB + 140) - xL
        );
        let mag2 = 80 / Math.sin(theta2);
        let xSS = mag2 * Math.cos(theta2);
        shad.style.width = 140 - xSS + xS +'px';
        
    };
    
    hold.addEventListener('clock-wizz', woggle, { passive: false });
    
    woggle({detail:{dir:0, mag:0, event:{preventDefault:()=>{}}}});
    
    window.addEventListener('resize', e => {
        HBcs = window.getComputedStyle(HB);
        HBw = parseInt(HBcs.width, 10);
        WW = parseInt(window.getComputedStyle(hold).width, 10) + HBw;
        left = HBw + parseInt(HBcs.left, 10);
        woggle({detail:{dir:0, mag:0, event:{preventDefault:()=>{}}}});
    });

});

</script>

</html>
