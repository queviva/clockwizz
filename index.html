<!doctype html><html>
    
<head><title>clockwizz</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="icon" type="image/x-icon" href="favicon.ico">
<link id="luckiestFont" href="https://fonts.googleapis.com/css?family=Luckiest+Guy" rel="stylesheet">
<link id="demoStyles" rel="stylesheet" type="text/css" href="demoStyles.css">
<script id="wizzScript" src="clockwizz.js"></script>
</head>

<body>
<div id="holder">
    
    <div id="sceneDiv" class="clockwizz" data-wizz>
        <div id="heartDiv">
            <svg id="heartSVG" transform="scale(0)" style="right:50px;bottom:20px;border:0px solid #fff;" height="200px" width="200px" xmlns="http://www.w3.org/2000/svg">
                <path class="Xpath" fill="#a20" stroke="rgba(50, 10, 0, 0.95)" stroke-width="10" style="transform-origin:50% 50%" transform="rotate(-35 0 0) translate(30 5)" d="
M 0 150
A 500 500 0 0 0 0 50
A 30 30 0 0 1 100 50
A 30 30 0 0 1 100 150
A 500 500 0 0 0 0 150
Z
                "/>
            </svg>
        </div>

        <img id="hackbox" src="hackBox0.svg">
        
        <div id="shadow"></div>
        
        <div id="queviva" class="qr"><i>~queviva</i></div>
    </div>
    
    <div id="discussion">
    
    <div class="qr">
        make a circular motion, while touching or pressing,
        on the image above
        
        <br><br>
    
        <b>clockwizz</b> adds a <i>clockwise motion event</i>
        to any of the specified elements in a page;
        listen for, and handle them, in the same way
        you would any event.
        
        <br><br>
        
        include the script, along with any optional
        parameters in a data-param;
        the following example lists all default values
    </div>

    <div class="qr">
        <pre>
            
&lt;script src="clockwizz.js"
 data-wizz='{
    "selector"       : "wizz"
    "eventName"      : "clockwizz",
    "direction"      : "dir",
    "magnitude"      : "mag",
    "eventRef"       : "evt",
    "buffSize"       : 5,
    "min"            : 2,
    "max"            : 90,
    "preventDefault" : true
 }'
&gt;&lt;/script&gt;


&lt;div id="sampleDiv" data-wizz&gt;
    clockwise motions on this div
    will generate events
&lt;/div&gt;


&lt;script&gt;

    document.getElementById('sampleDiv')
    .addEventListener(
        'clockwizz',
        e => {
            // handle clockwise motion using
            //
            // e.detail.dir
            // for the direction of the turn
            //
            // e.detail.mag
            // for the magnitude of the turn
            //
            // e.detail.evt
            // for reference to the event
        }
    );
        
&lt;/script&gt;

        </pre>
    </div>
    
    <div class="qr">
        <i>e.detail.dir</i> has three possible values:
        <ul style="font-family:cousine;">
            <li>&nbsp;1 ::: clockwise</li>
            <li>&nbsp;0 ::: no turn</li>
            <li>-1 ::: counter-clockwise</li>
        </ul>
        
    </div>
    
    <div class="qr">
        <i>e.detail.mag</i> is a pixel value of the
        magnitude of the turning - the larger the circles
        being swept out, the larger the integer's value
    </div>
    
    <div class="qr">
        <i>e.detail.evt</i> is a reference to the event
        that generated the clockwise motion -
        that is, if a mouse event, or a touch event,
        or a pointer event, generated the clockwise event,
        <i>e.detail.evt</i> is a reference to that event
        <br><br>
        for instance,
        in the case where <i>preventDefault</i> is false,
        the clockwizz handler might want to
        <i>stopPropagation</i> or other such things; that
        would be done with: <i>e.detail.evt.stopPropagation()</i>
        <br><br>
        or, if you wanted to know the x-coordinate
        location of the mouse when the clockwise event was
        generated, you can get that from: <i>e.detail.evt.clientX</i>
    </div>
            
    <div id="samp0" class="qr" data-wizz style="
        margin:0px;border-radius:0px 10px;text-align:center;
    ">
    
    clockwise motions in this div will change the background color
    <br><br>
    <a href="demo.html">see this page and its source for
    another example</a>
        
      <script>
      const samp0 = document.getElementById('samp0');
      samp0.hue = 12;
      samp0.style.backgroundColor = 'hsla('+ samp0.hue +',100%,33%,1.0)';
      samp0.addEventListener('clockwizz', e => {
        samp0.hue = samp0.hue + (3 * e.detail.dir);
        samp0.style.backgroundColor = 'hsla('+ samp0.hue +',100%,33%,1.0)';
      });
      </script>
    </div>

    <div class="qr">
        ofcourse, all of these properties can have their
        names changed by using the data-parameter;
        the point is that you can change what event you
        want to listen for, or what e.detail refers to
        the direction -
        these are the default values:
        
        <ul>
            <li><b>selector : wizz</b> - this is the term
            that gets added to the element's tag as a
            data-parm to indicate that it should generate
            clockwise motion events; by default, that
            might look like this <i>&lt;div data-wizz&gt;</i>
            </li>
            <br>
            
            <li><b>eventName : clockwizz</b> - this is the
            event to listen for and handle
            </li>
            <br>

            <li><b>direction : dir</b> - e.detail.dir is
            the integer value of one for clockwise,
            negative one for anti-clockwise,
            or zero for no-turn
            </li>
            <br>
            
            <li><b>magnitude : mag</b> - e.detail.mag is
            the size of the circle of clockwise turning
            in an integer number of pixels
            </li>
            <br>
            
            <li><b>eventRef  : evt</b> - e.detail.evt is
            a reference to whatever event actually generated
            the clockwise motion
            </li>
            <br>
            
            <li><b>buffSize  : 5</b> - the calculation for
            clockwise motion requires a certain number of
            buffer coordinates; adjusting this positive
            integer will make the buffer more discerning
            </li>
            <br>
            
            <li><b>min : 2</b> - this is the minimum angle
            between consecutive lines that the clockwise
            calculator will interpret as an attempt to move
            in a clockwise motion
            </li>
            <br>
            
            <li><b>max : 90</b> - this is the maximum angle
            between consecutive lines that the clockwise
            calculator will interpret as an attempt to move
            in a clockwise motion
            </li>
            <br>
            
            <li><b>preventDefault : true </b> - by default,
            <i>stopPropagation()</i> and <i>preventDefault()</i>
            are called on whatever event generated the
            clockwise motion - change this boolean value to
            <i>false</i> if you want default behaviors to occur
            </li>
            
        </ul>
    </div>

    <div>
        if you are happy with the defaults, you can simply
        include the <i>clockwizz</i> script, label any
        elements with <i>data-wizz</i> parameters, and
        write handlers for the <i>clockwizz</i> event
        <pre>
            
&lt;script src="clockwizz.js"&gt;&lt;/script&gt;

&lt;div data-wizz&gt;
...
&lt;/div&gt;
        </pre>
            
    </div>
    </div>
    
    <br><br>
</div>
</body>

<script id="demoScript">

window.addEventListener('load', e => {
    
    const
    HB = document.getElementById('hackbox'),
    hold = document.getElementById('sceneDiv'),
    hrt = document.getElementById('heartSVG'),
    shad = document.getElementById('shadow');
    
    let
    HBcs = window.getComputedStyle(HB),
    HBw = parseInt(HBcs.width, 10),
    holdWidth = parseInt(window.getComputedStyle(hold).width, 10),
    WW = holdWidth + HBw,
    left = HBw + parseInt(HBcs.left, 10),
    pulse = 1,
    xL = WW - 120, yL = -100,
    xB = left, yB = 200,
    xS = 0, yS = 280;
        
    const woggle = e => {
        
        left = (((left+((e.detail.mag/5)*e.detail.dir*2))%WW)+WW)%WW;
        HB.style.left = -HBw + left +'px';
        xB = -HBw + left + 60;
        hrt.setAttributeNS(null,'transform', 'scale('+
            (0.0 + (3 * ((Math.abs(((left * pulse) % WW) - (WW/2)))/WW)))
        +')');
        
        // calculate the shadow x position
        let theta1 = -Math.atan2(
            yB - yL,
            xB - xL
        );
        let mag1 = 80 / Math.sin(theta1);
        xS = mag1 * Math.cos(theta1);
        shad.style.left = xB - xS + 'px';
        
        // calculate the shadow width
        let theta2 = -Math.atan2(
            yB - yL,
            (xB + 140) - xL
        );
        let mag2 = 80 / Math.sin(theta2);
        let xSS = mag2 * Math.cos(theta2);
        shad.style.width = 140 - xSS + xS +'px';
        
    };
    
    hold.addEventListener('clockwizz', woggle, { passive: false });
    
    woggle({detail:{dir:0, mag:0, event:{preventDefault:()=>{}}}});
    
    window.addEventListener('resize', e => {
        HBcs = window.getComputedStyle(HB);
        HBw = parseInt(HBcs.width, 10);
        WW = parseInt(window.getComputedStyle(hold).width, 10) + HBw;
        left = HBw + parseInt(HBcs.left, 10);
        woggle({detail:{dir:0, mag:0, event:{preventDefault:()=>{}}}});
    });

});

</script>

</html>
